/**
 * Leaf mesh data converted from Three.js JSON format
 * Original files: leaf3.js (stalk), leaf5.js (leaf blade)
 */

import * as BABYLON from '@babylonjs/core';

export const LeafData = {
  // Leaf stalk (Cone01) - 70 vertices, 126 triangles
  stalk: {
    vertices: [10.6517,0.0,-0.255661,7.1875,0.0,-7.44923,-0.596577,0.0,-9.2259,-6.83893,0.0,-4.24779,-6.83893,0.0,3.73647,-0.596578,0.0,8.71458,7.1875,0.0,6.93791,10.4906,8.39059,-0.255661,7.38715,8.90158,-6.78678,0.413793,10.0498,-8.39983,-5.1784,10.9705,-3.88016,-5.1784,10.9705,3.36884,0.413793,10.0498,7.88851,7.38714,8.90158,6.27546,11.7282,16.8299,-0.255661,9.0512,17.736,-6.12432,3.03603,19.772,-7.57376,-1.78777,21.4048,-3.51252,-1.78777,21.4048,3.0012,3.03603,19.772,7.06244,9.0512,17.736,5.613,14.3753,25.0828,-0.255661,12.1626,26.2618,-5.46187,7.19076,28.9109,-6.74769,3.20365,31.0354,-3.14489,3.20365,31.0354,2.63357,7.19076,28.9109,6.23637,12.1626,26.2618,4.95055,18.4027,32.9122,-0.255661,16.6643,34.2412,-4.79941,12.7584,37.2275,-5.92163,9.6261,39.6223,-2.77725,9.62611,39.6223,2.26593,12.7584,37.2275,5.4103,16.6643,34.2412,4.28809,23.7411,40.0857,-0.255661,22.4604,41.4472,-4.13696,19.5827,44.5063,-5.09556,17.2749,46.9595,-2.40962,17.2749,46.9595,1.8983,19.5827,44.5063,4.58424,22.4604,41.4472,3.62563,30.282,46.3828,-0.255661,29.4174,47.6694,-3.4745,27.4748,50.5604,-4.26949,25.9169,52.8788,-2.04198,25.9169,52.8788,1.53066,27.4748,50.5604,3.75817,29.4174,47.6694,2.96318,37.8796,51.601,-0.255661,37.3681,52.7208,-2.81205,36.2188,55.237,-3.44342,35.2971,57.2548,-1.67435,35.2971,57.2548,1.16303,36.2188,55.237,2.9321,37.3681,52.7208,2.30072,46.354,55.5625,-0.255661,46.1148,56.4427,-2.14959,45.5775,58.4204,-2.61735,45.1466,60.0064,-1.30671,45.1466,60.0064,0.79539,45.5775,58.4204,2.10603,46.1148,56.4427,1.63827,55.4951,58.1198,-0.255661,55.4347,58.7097,-1.48714,55.2989,60.0354,-1.79128,55.19,61.0984,-0.939077,55.19,61.0984,0.427756,55.2989,60.0354,1.27996,55.4347,58.7097,0.975813],

    uvs: [[0.75,1.0,0.892857,1.0,0.0357143,1.0,0.178571,1.0,0.321429,1.0,0.464286,1.0,0.607143,1.0,0.75,0.9,0.892857,0.9,0.0357143,0.9,0.178571,0.9,0.321429,0.9,0.464286,0.9,0.607143,0.9,0.75,0.8,0.892857,0.8,0.0357143,0.8,0.178571,0.8,0.321429,0.8,0.464286,0.8,0.607143,0.8,0.75,0.7,0.892857,0.7,0.0357143,0.7,0.178571,0.7,0.321429,0.7,0.464286,0.7,0.607143,0.7,0.75,0.6,0.892857,0.6,0.0357143,0.6,0.178571,0.6,0.321429,0.6,0.464286,0.6,0.607143,0.6,0.75,0.5,0.892857,0.5,0.0357143,0.5,0.178571,0.5,0.321429,0.5,0.464286,0.5,0.607143,0.5,0.75,0.4,0.892857,0.4,0.0357143,0.4,0.178571,0.4,0.321429,0.4,0.464286,0.4,0.607143,0.4,0.75,0.3,0.892857,0.3,0.0357143,0.3,0.178571,0.3,0.321429,0.3,0.464286,0.3,0.607143,0.3,0.75,0.2,0.892857,0.2,0.0357143,0.2,0.178571,0.2,0.321429,0.2,0.464286,0.2,0.607143,0.2,0.75,0.1,0.892857,0.1,0.0357143,0.1,0.178571,0.1,0.321429,0.1,0.464286,0.1,0.607143,0.1,-0.107143,1.0,-0.107143,0.9,-0.107143,0.9,-0.107143,0.8,-0.107143,0.8,-0.107143,0.7,-0.107143,0.7,-0.107143,0.6,-0.107143,0.6,-0.107143,0.5,-0.107143,0.5,-0.107143,0.4,-0.107143,0.4,-0.107143,0.3,-0.107143,0.3,-0.107143,0.2,-0.107143,0.2,-0.107143,0.1]],

    indices: [
      0,1,8, 8,7,0, 1,2,9, 9,8,1, 2,3,10, 10,9,2, 3,4,11, 11,10,3, 4,5,12, 12,11,4, 5,6,13, 13,12,5, 6,0,7, 7,13,6,
      7,8,15, 15,14,7, 8,9,16, 16,15,8, 9,10,17, 17,16,9, 10,11,18, 18,17,10, 11,12,19, 19,18,11, 12,13,20, 20,19,12, 13,7,14, 14,20,13,
      14,15,22, 22,21,14, 15,16,23, 23,22,15, 16,17,24, 24,23,16, 17,18,25, 25,24,17, 18,19,26, 26,25,18, 19,20,27, 27,26,19, 20,14,21, 21,27,20,
      21,22,29, 29,28,21, 22,23,30, 30,29,22, 23,24,31, 31,30,23, 24,25,32, 32,31,24, 25,26,33, 33,32,25, 26,27,34, 34,33,26, 27,21,28, 28,34,27,
      28,29,36, 36,35,28, 29,30,37, 37,36,29, 30,31,38, 38,37,30, 31,32,39, 39,38,31, 32,33,40, 40,39,32, 33,34,41, 41,40,33, 34,28,35, 35,41,34,
      35,36,43, 43,42,35, 36,37,44, 44,43,36, 37,38,45, 45,44,37, 38,39,46, 46,45,38, 39,40,47, 47,46,39, 40,41,48, 48,47,40, 41,35,42, 42,48,41,
      42,43,50, 50,49,42, 43,44,51, 51,50,43, 44,45,52, 52,51,44, 45,46,53, 53,52,45, 46,47,54, 54,53,46, 47,48,55, 55,54,47, 48,42,49, 49,55,48,
      49,50,57, 57,56,49, 50,51,58, 58,57,50, 51,52,59, 59,58,51, 52,53,60, 60,59,52, 53,54,61, 61,60,53, 54,55,62, 62,61,54, 55,49,56, 56,62,55,
      56,57,64, 64,63,56, 57,58,65, 65,64,57, 58,59,66, 66,65,58, 59,60,67, 67,66,59, 60,61,68, 68,67,60, 61,62,69, 69,68,61, 62,56,63, 63,69,62
    ]
  },

  // Leaf blade (Object) - 24 vertices, 28 triangles
  leaf: {
    vertices: [-16.2575,4.75678,-4.48695,-8.77516,6.92026,-0.415009,-5.58226,6.23366,-6.99335,-13.0387,5.28671,-14.8253,-5.58226,6.23366,6.71012,-17.2334,4.8246,3.54212,-12.4404,5.31619,14.0303,3.2749,2.76087,-9.15179,-0.699028,-0.449104,-20.3321,1.16886,2.76087,7.90766,0.230301,-1.02629,20.8372,12.0791,0.134613,-8.52098,12.0791,-0.623978,7.77655,23.7439,-8.5393,-0.141619,-5.58226,7.34134,-0.401378,-1.67254,6.58684,-0.362218,12.0791,1.45015,-0.207842,5.90942,2.85196,-9.33066,6.46965,-2.1944,-20.1822,4.94547,2.85196,8.16958,3.14281,1.15588,15.4575,19.5124,-3.75152,-4.3313,19.5124,-4.13082,3.81746,19.5124,-3.09375,-0.174731],

    uvs: [[0.956019,0.611155,0.789373,0.527254,0.730733,0.668688,0.891128,0.832737,0.725682,0.376627,0.972553,0.439656,0.868124,0.217969,0.571296,0.718105,0.67517,0.954859,0.607933,0.353706,0.644426,0.0777776,0.406965,0.708054,0.405391,0.360705,0.216811,0.533961,0.72183,0.528194,0.646538,0.528866,0.396214,0.530877,0.517134,0.722933,0.539203,0.954427,0.53033,0.349579,0.574296,0.193557,0.276626,0.621625,0.275838,0.44795,0.27125,0.533036]],

    indices: [
      0,1,2, 2,3,0, 1,14,2, 1,5,6, 6,4,1, 7,18,8, 2,14,15, 15,7,2, 6,10,20, 16,23,21, 21,11,16, 17,7,15, 11,17,15, 16,11,15, 1,4,14, 4,9,15, 15,14,4, 15,9,19, 15,19,12, 15,12,16, 16,12,22, 22,23,16, 23,13,21, 22,13,23, 20,4,6, 8,3,2, 2,7,8, 20,9,4
    ]
  }
};

/**
 * Create Babylon.js mesh from leaf data
 */
export function createLeafMesh(scene, data, material, name) {
  const mesh = new BABYLON.Mesh(name, scene);
  const vertexData = new BABYLON.VertexData();

  const positions = new Float32Array(data.vertices);
  const numVertices = positions.length / 3;
  const uvs = new Float32Array(data.uvs[0]);
  const indices = new Uint32Array(data.indices);

  // Compute normals from geometry
  const normals = new Float32Array(numVertices * 3);
  BABYLON.VertexData.ComputeNormals(positions, indices, normals);

  vertexData.positions = positions;
  vertexData.normals = normals;
  vertexData.uvs = uvs;
  vertexData.indices = indices;

  vertexData.applyToMesh(mesh);
  mesh.material = material;

  return mesh;
}
